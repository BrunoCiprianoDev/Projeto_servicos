package entidades;

public class Historico {

	private Contrato[] listaDeContratos = new Contrato[3];
	private int contadorDeContratos = 0;
	
	public Historico(Contrato contrato) {
		this.listaDeContratos[contadorDeContratos++] = contrato;
	}
	
	public double calcularFaturamentoTotalPrevisto() {
		double totalOrcamentos = 0;
		for(int i=0; i<this.contadorDeContratos; i++) {
			totalOrcamentos += this.listaDeContratos[i].getServico().calcularValorOrcamento();
		}
		 return totalOrcamentos;
	}
	
	public double calcularTotalEfetivamentePago() {
		double totalEfetivamentePago = 0;
		for(int i=0; i<this.contadorDeContratos; i++) {
			totalEfetivamentePago += this.listaDeContratos[i].getServico().calcularValorEfetivamentePago();
		}
		 return totalEfetivamentePago;
	}
	
	public void setContrato(Contrato contrato) {
		if((this.contadorDeContratos == this.listaDeContratos.length)) {
			Contrato[] listaTemporaria = new Contrato[this.listaDeContratos.length+3];
			for(int i=0; i<this.contadorDeContratos; i++) {
				listaTemporaria[i] = this.listaDeContratos[i]; 
			}
			this.listaDeContratos = listaTemporaria;
		}
		this.listaDeContratos[contadorDeContratos++] = contrato;
	}
	
	public Contrato[] getContratos() {
		return this.listaDeContratos;
	}
	
	public String informacoesDeUmDeterminadoContrato(String codigoPrestacaoServico) {
		// Item 12 
		for(int i=0; i<this.contadorDeContratos; i++) {
			if(codigoPrestacaoServico.equals(listaDeContratos[i].getCodigoPrestacaoServico())) {
				return this.listaDeContratos[i].toString();
			}
		}
		return "Contrato não econtrado no histórico!";
	}
	
	@Override
	public String toString() {
		String texto = "\n";
		for(int i=0; i<this.contadorDeContratos; i++) {
			texto = texto.concat(this.listaDeContratos[i].toString()+
					"\n-------------------------------------------------------------\n");
		}
		return texto;
	}
	

}
